#!/usr/bin/env bash
# SPDX-License-Identifier: MPL-2.0
set -euo pipefail

source "$(dirname "$0")/common.sh"

install_dev_dependencies
if [[ -d "${ROOT_DIR}/infra/migrations" ]]; then
    echo "Running migrations in infra/migrations" >&2
    find "${ROOT_DIR}/infra/migrations" -type f -name '*.py' -print0 | while IFS= read -r -d '' script; do
        "${PYTHON_BIN}" "$script"
    done
else
    echo "No migrations defined."
fi
